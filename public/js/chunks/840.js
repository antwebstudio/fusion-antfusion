(self.webpackChunktinymcefieldtype=self.webpackChunktinymcefieldtype||[]).push([[840],{4293:t=>{t.exports=function(t){return null==t}},5840:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(4293),i=n.n(o);const a={props:{cssClass:{},url:{},confirmButtonText:{default:"Confirm"},cancelButtonLabel:{default:"Cancel"},title:{},record:{},resourceId:{},resourceHandle:{},actionHandle:{},confirmTitle:{},confirmText:{},to:{},text:{}},data:function(){return{loading:!1}},computed:{needConfirmation:function(){return this.confirmText},modalTitle:function(){return this.confirmTitle?this.confirmTitle:this.title},modalName:function(){return"action-link-confirmation-"+this._uid}},methods:{toggle:function(){this.$parent&&this.$parent.toggle&&this.$parent.toggle()},performAction:function(){console.log("need ",this.needConfirmation),this.needConfirmation?this.askConfirmation():this.confirm()},askConfirmation:function(){this.openModal(this.modalName)},confirm:function(){var t=this;console.log("confirm",this),this.loading=!0,axios.post(this.url,{resourceIds:[this.record.id]}).then((function(e){console.log("action button",e),e.data.redirect?e.data.target?window.open(e.data.redirect,e.data.target):t.$router.push(e.data.redirect):(t.postForm(t.url),t.loading=!1,toast(e.data.message,"success"),t.closeModal(t.modalName),t.$emit("updated"))}))},closeModal:function(t,e){this.$bus.$emit("toggle-modal-"+t,e)},openModal:function(t,e){this.$bus.$emit("toggle-modal-"+t,e)},postForm:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",o=document.createElement("form");for(var i in o.method=n,o.action=t,e)if(e.hasOwnProperty(i)){var a=document.createElement("input");a.type="hidden",a.name=i,a.value=e[i],o.appendChild(a)}document.body.appendChild(o),o.submit()},emitResponseCallback:function(t){"function"==typeof t&&t()},handleActionResponse:function(t,e){var n=this,o=e["content-disposition"];t instanceof Blob&&i()(o)&&"application/json"===t.type?t.text().then((function(t){n.handleActionResponse(JSON.parse(t),e)})):t instanceof Blob?(console.log("blob"),this.emitResponseCallback((function(){var e="unknown",n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");if(i.href=n,o){var a=o.match(/filename="(.+)"/);2===a.length&&(e=a[1])}i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n)}))):t.download?(console.log("data.download"),this.emitResponseCallback((function(){var e=document.createElement("a");e.href=t.download,e.download=t.name,document.body.appendChild(e),e.click(),document.body.removeChild(e)}))):console.log("others",t)}}};const r=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ui-dropdown-link",t._b({class:t.cssClass,on:{click:function(e){return e.preventDefault(),t.performAction.apply(null,arguments)}}},"ui-dropdown-link",t.$props,!1),[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),t.needConfirmation?n("portal",{attrs:{to:"modals"}},[n("ui-modal",{key:t.modalName,attrs:{name:t.modalName,title:t.modalTitle},scopedSlots:t._u([{key:"footer",fn:function(e){return[n("ui-button",{staticClass:"ml-3",attrs:{disabled:t.loading,variant:"danger"},on:{click:function(e){return t.confirm()}}},[t._v(t._s(t.confirmButtonText))]),t._v(" "),n("ui-button",{attrs:{disabled:t.loading,variant:"secondary"},on:{click:function(e){return t.closeModal(t.modalName)}}},[t._v(t._s(t.cancelButtonLabel))])]}}],null,!1,4211464818)},[n("p",[t._v(t._s(t.confirmText))])])],1):t._e()],1)}),[],!1,null,null,null).exports},1900:(t,e,n)=>{"use strict";function o(t,e,n,o,i,a,r,s){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}n.d(e,{Z:()=>o})}}]);